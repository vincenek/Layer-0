<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Layer 0 Decision Mapper</title>
<meta name="theme-color" content="#0f0f15">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<!-- Icons (Base64): -->
<link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAEvElEQVR4nO3Y0ZHbOBAEUPpCUv4xKCXfz6lOVkleUgSIAfq9ALbE">
<link rel="icon" type="image/png" sizes="64x64" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABWklEQVR4nO2bTbLDIAyD6TtS7n+GXKlvLVEZYLgOHeWDnSmpZGQpfOVRrKhJsGILcPS/c+BmLgAkGiQR7HbSKkZ1wGhgAuI0OEDGISINgFpYcYUREIGJkZ2yrv0XUTsaQeJbdqKdK+xq2Vi1uQjL9stHW6zvpHwvrFUwPYggvAyFbX/S5raDRhb2JSz42Q49do5IdrsBINyt+MBZoq4Eivd8yF6uLc1voEUhDV7u85XqQn45YWZuAQ61rOwXWPrUe74mH117nud96FMygScDQd9kCtn2nEhjicUpFMxVwVbQghGuYLqgQb0IvtYW0IO6rVG0h5vWCkVWOOaGsaLpZW8XVWQLg4yYQaRMGLx6txVu4+Vy2ID1sr/zH9d6TXU8gVCDOct61Q0+R5o24E6koUdZOgA8JYuQBqLUe3+l6N8+xA2nJqU9GeHa0J7LbSa2sFfblAUqZuh3YnfKhVAm+gkwAW5DyWUQDi+i1/rIQ6v0KJmwMcCldVKV6kVcEQ3QZtwip4CXcSND6n/rFO8/G9SfuVAB79ekbNeY+fMAAAAASUVORK5CYII=">
<!-- Inline web manifest (data URI) -->
<link rel="manifest" href='data:application/manifest+json,{"name":"Layer0 Decision Mapper","short_name":"Layer0","description":"A decision mapping PWA","icons":[{"src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAEvElEQVR4nO3Y0ZHbOBAEUPpCUv4xKCXfz6lOVkleUgSIAfq9ALbE","type":"image/png","sizes":"192x192"},{"src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAPOUlEQVR4nO3cYXYbyQ2FUU6W5P2vwVua","type":"image/png","sizes":"512x512"}],"start_url":".","display":"standalone","theme_color":"#0f0f15","background_color":"#0f0f15"}'>
<style>
:root {
  --primary: #7e22ce;
  --primary-dark: #5b21b6;
  --primary-light: #a855f7;
  --secondary: #06b6d4;
  --accent: #ec4899;
  --dark: #0f0f15;
  --darker: #09090b;
  --light: #f5f5f7;
  --gray: #27272a;
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}

body {
  background: linear-gradient(135deg, var(--darker), var(--dark));
  color: var(--light);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  position: relative;
  overflow-x: hidden;
  line-height: 1.6;
}

.container {
  width: 100%;
  max-width: 800px;
  background: rgba(23, 23, 33, 0.85);
  backdrop-filter: blur(12px);
  border-radius: 24px;
  padding: 30px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
  border: 1px solid rgba(126, 34, 206, 0.3);
  position: relative;
  overflow: hidden;
  margin: 20px 0;
  z-index: 1;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  padding-bottom: 20px;
  border-bottom: 1px solid rgba(126, 34, 206, 0.3);
}

.brand {
  display: flex;
  align-items: center;
  gap: 15px;
}

.logo {
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: bold;
}

.brand-text {
  display: flex;
  flex-direction: column;
}

.brand-name {
  font-size: 28px;
  font-weight: 800;
  background: linear-gradient(to right, var(--primary-light), var(--secondary));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  line-height: 1.2;
}

.brand-tagline {
  font-size: 14px;
  color: var(--primary-light);
  letter-spacing: 1px;
}

.step {
  display: none;
}

.step.active {
  display: block;
  animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

h1 {
  font-size: 2.5rem;
  text-align: center;
  margin-bottom: 20px;
  background: linear-gradient(to right, var(--primary-light), var(--secondary));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  line-height: 1.2;
  font-weight: 800;
}

h2 {
  font-size: 1.8rem;
  margin: 20px 0;
  color: var(--primary-light);
  font-weight: 700;
}

p {
  margin-bottom: 15px;
  font-size: 1.1rem;
  color: #d1d1d6;
}

.btn {
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  border: none;
  padding: 14px 28px;
  border-radius: 14px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  box-shadow: 0 6px 20px rgba(126, 34, 206, 0.4);
  position: relative;
  overflow: hidden;
  text-decoration: none;
}

.btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(126, 34, 206, 0.6);
}

.btn:active {
  transform: translateY(1px);
}

.btn-secondary {
  background: transparent;
  border: 2px solid var(--primary);
  color: var(--primary-light);
  box-shadow: none;
}

.btn-group {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  margin-top: 30px;
  justify-content: center;
}

.input-group {
  margin-bottom: 25px;
}

label {
  display: block;
  margin-bottom: 12px;
  font-size: 1.1rem;
  font-weight: 500;
  color: var(--primary-light);
}

input, textarea {
  width: 100%;
  padding: 16px;
  border-radius: 14px;
  border: 2px solid var(--gray);
  background: rgba(50, 50, 60, 0.7);
  color: var(--light);
  font-size: 1.1rem;
  transition: all 0.3s;
}

input:focus, textarea:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 4px rgba(126, 34, 206, 0.3);
}

textarea {
  min-height: 120px;
  resize: vertical;
}

.chain-container {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 30px;
  margin: 30px 0;
}

.chain-box {
  flex: 1;
  min-width: 300px;
  background: rgba(45, 45, 55, 0.7);
  border-radius: 20px;
  padding: 25px;
  border: 1px solid rgba(126, 34, 206, 0.3);
  position: relative;
  overflow: hidden;
}

.chain-box::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 6px;
  height: 100%;
  background: linear-gradient(to bottom, var(--primary), var(--secondary));
}

.chain-item {
  padding: 18px;
  margin: 18px 0;
  border-radius: 14px;
  background: rgba(55, 55, 65, 0.8);
  border-left: 4px solid var(--primary-light);
  animation: slideIn 0.4s ease-out;
  position: relative;
  display: flex;
  align-items: flex-start;
  gap: 15px;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(-20px); }
  to { opacity: 1; transform: translateX(0); }
}

.cognito-item {
  background: rgba(30, 70, 50, 0.6);
  border-left: 4px solid var(--success);
}

.score-container {
  display: flex;
  justify-content: center;
  margin: 30px 0;
}

.score-circle {
  width: 180px;
  height: 180px;
  border-radius: 50%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: conic-gradient(var(--success) 0% 75%, var(--gray) 75% 100%);
  position: relative;
  box-shadow: 0 0 30px rgba(16, 185, 129, 0.3);
}

.score-value {
  font-size: 3.5rem;
  font-weight: 800;
  color: white;
}

.score-label {
  color: var(--light);
  font-size: 1.1rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.history-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 25px;
  margin-top: 25px;
}

.history-card {
  background: rgba(45, 45, 55, 0.7);
  border-radius: 18px;
  padding: 20px;
  border: 1px solid rgba(126, 34, 206, 0.2);
  transition: all 0.3s ease;
  cursor: pointer;
  display: flex;
  flex-direction: column;
}

.history-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(126, 34, 206, 0.3);
  border-color: var(--primary);
}

.history-title {
  font-size: 1.3rem;
  font-weight: 600;
  margin-bottom: 10px;
  color: var(--primary-light);
}

.history-decision {
  flex-grow: 1;
  margin-bottom: 15px;
  color: #d1d1d6;
}

.history-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: auto;
}

.history-tags {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.tag {
  background: rgba(126, 34, 206, 0.2);
  color: var(--primary-light);
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.85rem;
}

.timestamp {
  font-size: 0.85rem;
  color: #a1a1aa;
}

.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(15, 15, 21, 0.95);
  z-index: 100;
  align-items: center;
  justify-content: center;
}

.modal.active {
  display: flex;
}

.modal-content {
  background: var(--dark);
  border-radius: 24px;
  padding: 40px;
  max-width: 800px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
  border: 1px solid var(--primary);
  position: relative;
}

.close-modal {
  position: absolute;
  top: 20px;
  right: 20px;
  background: none;
  border: none;
  color: var(--light);
  font-size: 1.5rem;
  cursor: pointer;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
}

.close-modal:hover {
  background: rgba(126, 34, 206, 0.2);
  transform: rotate(90deg);
}

.footer {
  text-align: center;
  padding: 30px 0 20px;
  color: #a1a1aa;
  font-size: 0.9rem;
  width: 100%;
}

@media (max-width: 768px) {
  .container {
    padding: 20px;
  }
  
  h1 {
    font-size: 2rem;
  }
  
  h2 {
    font-size: 1.5rem;
  }
  
  .chain-container {
    flex-direction: column;
  }
  
  .btn-group {
    flex-direction: column;
    align-items: center;
  }
  
  .btn {
    width: 100%;
  }
}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="brand">
        <div class="logo">L0</div>
        <div class="brand-text">
          <div class="brand-name">Layer 0</div>
          <div class="brand-tagline">DECISION MAPPER</div>
        </div>
      </div>
    </div>
    
    <!-- Step 0: Welcome -->
    <div id="step0" class="step active">
      <h1>Decision Intelligence Platform</h1>
      <p class="text-center">Map your decisions, understand your thought process, and discover optimized cognitive pathways.</p>
      
      <div class="btn-group">
        <button id="beginBtn" class="btn"><i class="fas fa-play"></i> Begin Mapping</button>
      </div>
    </div>
    
    <!-- Step 1: Decision Input -->
    <div id="step1" class="step">
      <h2>Your Decision</h2>
      <p>Describe a decision you recently made. Be specific about the context and outcome.</p>
      
      <div class="input-group">
        <label for="decision">Decision Description</label>
        <textarea id="decision" placeholder="Example: I decided to skip my workout yesterday to finish a work project"></textarea>
      </div>
      
      <div class="btn-group">
        <button id="decision-btn" class="btn"><i class="fas fa-arrow-right"></i> Next</button>
        <button class="btn btn-secondary" id="backToHome"><i class="fas fa-arrow-left"></i> Back</button>
      </div>
    </div>
    
    <!-- Step 2: Why 1 -->
    <div id="step2" class="step">
      <h2>First Reflection</h2>
      <p>Why did you make this decision? What was your primary motivation?</p>
      
      <div class="input-group">
        <label for="why1">Reason #1</label>
        <textarea id="why1" placeholder="Describe your reasoning..."></textarea>
      </div>
      
      <div class="btn-group">
        <button id="why1-btn" class="btn"><i class="fas fa-arrow-right"></i> Next</button>
        <button class="btn btn-secondary" id="backToDecision"><i class="fas fa-arrow-left"></i> Back</button>
      </div>
    </div>
    
    <!-- Step 3: Why 2 -->
    <div id="step3" class="step">
      <h2>Deeper Reflection</h2>
      <p>Why did you have that motivation? What underlying factors influenced your decision?</p>
      
      <div class="input-group">
        <label for="why2">Reason #2</label>
        <textarea id="why2" placeholder="Describe your reasoning..."></textarea>
      </div>
      
      <div class="btn-group">
        <button id="why2-btn" class="btn"><i class="fas fa-arrow-right"></i> Next</button>
        <button class="btn btn-secondary" id="backToWhy1"><i class="fas fa-arrow-left"></i> Back</button>
      </div>
    </div>
    
    <!-- Step 4: Why 3 -->
    <div id="step4" class="step">
      <h2>Root Cause</h2>
      <p>What is the fundamental reason behind that motivation? What core belief or value is driving this?</p>
      
      <div class="input-group">
        <label for="why3">Reason #3</label>
        <textarea id="why3" placeholder="Describe your reasoning..."></textarea>
      </div>
      
      <div class="btn-group">
        <button id="why3-btn" class="btn"><i class="fas fa-check"></i> Complete Reflection</button>
        <button class="btn btn-secondary" id="backToWhy2"><i class="fas fa-arrow-left"></i> Back</button>
      </div>
    </div>
    
    <!-- Step 5: Results -->
    <div id="step5" class="step">
      <h2>Decision Analysis</h2>
      
      <div class="score-container">
        <div class="score-circle">
          <div class="score-value">82</div>
          <div class="score-label">Cognito Score</div>
        </div>
      </div>
      
      <div class="chain-container">
        <div class="chain-box">
          <h3>Your Thought Process</h3>
          <div id="userChain"></div>
        </div>
        
        <div class="chain-box">
          <h3>Optimized Cognito Path</h3>
          <div id="cognitoPath"></div>
        </div>
      </div>
      
      <div class="btn-group">
        <button id="save" class="btn btn-success"><i class="fas fa-save"></i> Save Session</button>
        <button id="newSessionBtn" class="btn btn-secondary"><i class="fas fa-plus"></i> New Session</button>
        <button id="historyBtn" class="btn"><i class="fas fa-history"></i> View History</button>
        <button id="export" class="btn btn-warning"><i class="fas fa-share-alt"></i> Export</button>
      </div>
    </div>
    
    <!-- Step 6: History -->
    <div id="step6" class="step">
      <h2>Session History</h2>
      <p>Review your past decision mappings and cognitive optimizations.</p>
      
      <div id="historyList" class="history-grid">
        <!-- History items will be injected here -->
      </div>
      
      <div class="btn-group">
        <button id="clearDataBtn" class="btn btn-secondary"><i class="fas fa-trash"></i> Clear All Data</button>
        <button class="btn" id="backToHome2"><i class="fas fa-home"></i> Back to Home</button>
      </div>
    </div>
  </div>
  
  <!-- Session Detail Modal -->
  <div id="sessionModal" class="modal">
    <div class="modal-content">
      <button class="close-modal">&times;</button>
      <h2 id="modalTitle">Session Detail</h2>
      <div id="modalContent"></div>
    </div>
  </div>
  
  <div class="footer">
    <p>Layer 0 Decision Intelligence Platform &copy; 2023 | Proprietary Cognito Technology</p>
    <p style="font-size: 0.8rem; margin-top: 10px;">All decision data remains private and is never shared with third parties</p>
  </div>

  <script>
  (function() {
    // State management
    const state = {
      currentStep: 0,
      decision: '',
      why1: '',
      why2: '',
      why3: '',
      cognitoScore: 0,
      sessions: JSON.parse(localStorage.getItem('layer0_sessions')) || []
    };
    
    // DOM Elements
    const steps = document.querySelectorAll('.step');
    const beginBtn = document.getElementById('beginBtn');
    const decisionBtn = document.getElementById('decision-btn');
    const why1Btn = document.getElementById('why1-btn');
    const why2Btn = document.getElementById('why2-btn');
    const why3Btn = document.getElementById('why3-btn');
    const saveBtn = document.getElementById('save');
    const newSessionBtn = document.getElementById('newSessionBtn');
    const historyBtn = document.getElementById('historyBtn');
    const exportBtn = document.getElementById('export');
    const clearDataBtn = document.getElementById('clearDataBtn');
    const backToHome = document.getElementById('backToHome');
    const backToHome2 = document.getElementById('backToHome2');
    const backToDecision = document.getElementById('backToDecision');
    const backToWhy1 = document.getElementById('backToWhy1');
    const backToWhy2 = document.getElementById('backToWhy2');
    const sessionModal = document.getElementById('sessionModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const closeModal = document.querySelector('.close-modal');
    
    // Initialize
    function init() {
      showStep(0);
      setupEventListeners();
      renderHistory();
    }
    
    // Set up event listeners
    function setupEventListeners() {
      beginBtn.addEventListener('click', () => showStep(1));
      decisionBtn.addEventListener('click', () => {
        state.decision = document.getElementById('decision').value.trim();
        if (state.decision) showStep(2);
      });
      why1Btn.addEventListener('click', () => {
        state.why1 = document.getElementById('why1').value.trim();
        if (state.why1) showStep(3);
      });
      why2Btn.addEventListener('click', () => {
        state.why2 = document.getElementById('why2').value.trim();
        if (state.why2) showStep(4);
      });
      why3Btn.addEventListener('click', () => {
        state.why3 = document.getElementById('why3').value.trim();
        if (state.why3) {
          generateCognitoPath();
          showStep(5);
        }
      });
      saveBtn.addEventListener('click', saveSession);
      newSessionBtn.addEventListener('click', startNewSession);
      historyBtn.addEventListener('click', () => showStep(6));
      exportBtn.addEventListener('click', exportSession);
      clearDataBtn.addEventListener('click', clearData);
      backToHome.addEventListener('click', () => showStep(0));
      backToHome2.addEventListener('click', () => showStep(0));
      backToDecision.addEventListener('click', () => showStep(1));
      backToWhy1.addEventListener('click', () => showStep(2));
      backToWhy2.addEventListener('click', () => showStep(3));
      closeModal.addEventListener('click', () => sessionModal.classList.remove('active'));
      
      // Close modal on outside click
      window.addEventListener('click', (e) => {
        if (e.target === sessionModal) {
          sessionModal.classList.remove('active');
        }
      });
    }
    
    // Navigation
    function showStep(stepIndex) {
      state.currentStep = stepIndex;
      steps.forEach((step, index) => {
        step.classList.toggle('active', index === stepIndex);
      });
      
      if (stepIndex === 6) {
        renderHistory();
      }
    }
    
    // Generate optimized cognito path
    function generateCognitoPath() {
      // Calculate Cognito Score
      state.cognitoScore = 70 + Math.floor(Math.random() * 26);
      document.querySelector('.score-value').textContent = state.cognitoScore;
      
      // Render results
      renderResults();
    }
    
    // Render results
    function renderResults() {
      const userChain = document.getElementById('userChain');
      const cognitoPath = document.getElementById('cognitoPath');
      
      userChain.innerHTML = '';
      cognitoPath.innerHTML = '';
      
      // Add decision as the first item
      const decisionItem = document.createElement('div');
      decisionItem.className = 'chain-item';
      decisionItem.innerHTML = `<div>${state.decision}</div>`;
      userChain.appendChild(decisionItem);
      
      // Add why chain items
      const reasons = [state.why1, state.why2, state.why3];
      reasons.forEach((reason, index) => {
        const item = document.createElement('div');
        item.className = 'chain-item';
        item.innerHTML = `<div>${reason}</div>`;
        userChain.appendChild(item);
        
        const cognitoItem = document.createElement('div');
        cognitoItem.className = 'chain-item cognito-item';
        
        // Create optimized suggestions
        let optimized;
        if (index === 0) {
          optimized = `Instead of "${reason}", consider establishing clear priorities and boundaries`;
        } else if (index === 1) {
          optimized = `Address the root cause "${reason}" through proactive planning`;
        } else {
          optimized = `Transform "${reason}" into an opportunity for growth`;
        }
        
        cognitoItem.innerHTML = `<div>${optimized}</div>`;
        cognitoPath.appendChild(cognitoItem);
      });
    }
    
    // Save session to localStorage
    function saveSession() {
      const session = {
        id: Date.now(),
        decision: state.decision,
        why1: state.why1,
        why2: state.why2,
        why3: state.why3,
        cognitoScore: state.cognitoScore,
        timestamp: new Date().toLocaleString()
      };
      
      state.sessions.unshift(session);
      localStorage.setItem('layer0_sessions', JSON.stringify(state.sessions));
      
      alert(`Session saved successfully with Cognito Score: ${session.cognitoScore}`);
    }
    
    // Render history list
    function renderHistory() {
      const historyList = document.getElementById('historyList');
      historyList.innerHTML = '';
      
      if (state.sessions.length === 0) {
        historyList.innerHTML = '<p style="text-align: center; grid-column: 1 / -1; padding: 40px;">No sessions found. Start a new mapping session!</p>';
        return;
      }
      
      state.sessions.forEach(session => {
        const item = document.createElement('div');
        item.className = 'history-card';
        item.innerHTML = `
          <div class="history-title">${session.decision.substring(0, 60)}${session.decision.length > 60 ? '...' : ''}</div>
          <div class="history-footer">
            <div class="history-tags">
              <div class="tag">Score: ${session.cognitoScore}</div>
            </div>
            <div class="timestamp">${session.timestamp}</div>
          </div>
        `;
        
        item.addEventListener('click', () => {
          showSessionDetail(session);
        });
        
        historyList.appendChild(item);
      });
    }
    
    // Show session detail modal
    function showSessionDetail(session) {
      modalTitle.textContent = session.decision.substring(0, 40) + (session.decision.length > 40 ? '...' : '');
      
      modalContent.innerHTML = `
        <div style="margin-bottom: 30px;">
          <h3>Original Decision</h3>
          <p>${session.decision}</p>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
          <div>
            <h3>Thought Process</h3>
            <div style="margin-top: 15px;">
              <div class="chain-item" style="margin-bottom: 15px;">
                <div>${session.decision}</div>
              </div>
              <div class="chain-item" style="margin-bottom: 15px;">
                <div>${session.why1}</div>
              </div>
              <div class="chain-item" style="margin-bottom: 15px;">
                <div>${session.why2}</div>
              </div>
              <div class="chain-item" style="margin-bottom: 15px;">
                <div>${session.why3}</div>
              </div>
            </div>
          </div>
          
          <div>
            <h3>Optimized Path</h3>
            <div style="margin-top: 15px;">
              <div class="chain-item cognito-item" style="margin-bottom: 15px;">
                <div>Instead of "${session.why1}", consider establishing clear priorities</div>
              </div>
              <div class="chain-item cognito-item" style="margin-bottom: 15px;">
                <div>Address the root cause "${session.why2}" through planning</div>
              </div>
              <div class="chain-item cognito-item" style="margin-bottom: 15px;">
                <div>Transform "${session.why3}" into growth opportunity</div>
              </div>
            </div>
          </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
          <button class="btn" onclick="document.getElementById('sessionModal').classList.remove('active')"><i class="fas fa-times"></i> Close</button>
        </div>
      `;
      
      sessionModal.classList.add('active');
    }
    
    // Export current session as JSON file
    function exportSession() {
      const data = {
        decision: state.decision,
        why1: state.why1,
        why2: state.why2,
        why3: state.why3,
        cognitoScore: state.cognitoScore,
        timestamp: new Date().toISOString()
      };
      
      const json = JSON.stringify(data, null, 2);
      const blob = new Blob([json], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'layer0-session.json';
      a.click();
    }
    
    // Clear all data
    function clearData() {
      if (confirm('Are you sure you want to delete all session data? This cannot be undone.')) {
        localStorage.removeItem('layer0_sessions');
        state.sessions = [];
        renderHistory();
      }
    }
    
    // Start a new session
    function startNewSession() {
      // Reset state
      state.decision = '';
      state.why1 = '';
      state.why2 = '';
      state.why3 = '';
      state.cognitoScore = 0;
      
      // Reset inputs
      document.getElementById('decision').value = '';
      document.getElementById('why1').value = '';
      document.getElementById('why2').value = '';
      document.getElementById('why3').value = '';
      
      showStep(0);
    }
    
    // Initialize the app
    window.onload = init;
    
    // Simple XOR-based encryption/decryption
    function encrypt(text, password) {
      let enc = '';
      for (let i = 0; i < text.length; i++) {
        enc += String.fromCharCode(text.charCodeAt(i) ^ password.charCodeAt(i % password.length));
      }
      return btoa(enc);
    }
    
    function decrypt(data, password) {
      let str = atob(data);
      let dec = '';
      for (let i = 0; i < str.length; i++) {
        dec += String.fromCharCode(str.charCodeAt(i) ^ password.charCodeAt(i % password.length));
      }
      return dec;
    }
  })();
  </script>
  
  <!-- Font Awesome Icons -->
  <script>
    // Inline Font Awesome for offline use
    const faIcons = document.createElement('style');
    faIcons.innerHTML = `
    .fas {
      -moz-osx-font-smoothing: grayscale;
      -webkit-font-smoothing: antialiased;
      display: inline-block;
      font-style: normal;
      font-variant: normal;
      text-rendering: auto;
      line-height: 1;
    }
    .fa-play:before { content: "\\f04b"; }
    .fa-arrow-right:before { content: "\\f061"; }
    .fa-arrow-left:before { content: "\\f060"; }
    .fa-check:before { content: "\\f00c"; }
    .fa-save:before { content: "\\f0c7"; }
    .fa-plus:before { content: "\\f067"; }
    .fa-history:before { content: "\\f1da"; }
    .fa-share-alt:before { content: "\\f1e0"; }
    .fa-trash:before { content: "\\f1f8"; }
    .fa-home:before { content: "\\f015"; }
    .fa-times:before { content: "\\f00d"; }
    `;
    document.head.appendChild(faIcons);
  </script>
</body>
</html>